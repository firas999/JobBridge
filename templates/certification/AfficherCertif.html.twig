{% extends 'base.html.twig' %}

{% block title %}Hello CandidatureStageController!{% endblock %}

{% block body %}
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">


<h1> Liste des Certifications </h1>
<br>
<center>
<a href="{{ path('TrieDate') }}"><button class="btn"><i class="fa fa-folder"></i> Les plus proche</button></a>
<a href="{{ path('JAVA') }}"><button class="btn"><i class="fa fa-folder"></i>JAVA</button></a>
<a href="{{ path('WEB') }}"><button class="btn"><i class="fa fa-folder"></i>WEB</button></a>
<a href="{{ path('stat') }}"><button class="btn"><i class="fa fa-folder"></i>STATISTIQUE</button></a>
<a href="{{ path('pdf') }}"><button class="btn"><i class="fa fa-folder"></i>IMPRIMER</button></a>
</center>


<!DOCTYPE html>
<html>
<head>
<style>
#customers {
  font-family: Arial, Helvetica, sans-serif;
  border-collapse: collapse;
  width: 100%;
}

#customers td, #customers th {
  border: 1px solid #ddd;
  padding: 8px;
}

#customers tr:nth-child(even){background-color: #f2f2f2;}

#customers tr:hover {background-color: #ddd;}

#customers th {
  padding-top: 12px;
  padding-bottom: 12px;
  text-align: left;
  background-color: #4c7aaf;
  color: white;
}
</style>
</head>






<table border ="1" id="customers">
<tr>
   <th scope="row">ID</th>
    <th scope="row">TYPE</th>
     <th scope="row">DATE PASSAGE</th>
       <th scope="row">PRIX</th>
       <th scope="row">DESCRIPTION</th>
       <th scope="row">NOM</th>
       <th scope="row">NOM ENTREPRISE</th>
    
</tr>
<tbody id="all">
    {% for certification in Certifications %}
<tr>
   <td>

{{ certification.id }}

   </td>
   <td>

{{ certification.type }}

   </td>

<td>

{{certification.DatePassage |date('d/m/Y')}}

   </td>


<td>

{{certification.prix}}

   </td>
   <td>

{{certification.description}}

   </td>
   <td>

{{certification.nom}}

   </td>

     <td>

{{certification.entreprise.nom}}

   </td>


    <td>



<a href="{{ path('ModifierCertif', {'id': certification.id}) }}"><button class="btn"><i class="fa fa-folder"></i> Modifier</button></a>
  
<a href="{{ path('SupprimerCertif', {'id': certification.id}) }}"<button class="btn"><i class="fa fa-trash"></i> Supprimer</button></a> 


</td>




</tr>


{%endfor%}
</tbody>
	

</td>
</tr>
<td>

<script type="text/javascript">
function imprimer_page(){
  window.print();
}
</script>

<form>
  <input id="impression" name="impression" type="button" onclick="imprimer_page()" value="Imprimer cette page" />
</form>

</td>



</table>
<br>

 <div class="navigation">
 <center>
            {{ knp_pagination_render(Certifications) }}
</center>        
        </div>

       



<tbody id="search">
</tbody>
</table>




<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js">
</script>
<script>
$( document ).ready(function() {
        $("#search").keyup(function(e){
/* La variable value va prendre la valeur insérer dans le champ de texte afin d’effectuer la recherche */
          var value = $(this).val();
/* Ajax est lancé lors du remplissage du champ texte dont l’id est « search » pour faire la recherche */
  $.ajax({
/* l’url est une chaine de caractères contenant l’adresse où la requête est envoyée */
                url : "{{ path('SearchCertification') }}",
/* La méthode utilisée pour transférer les données est GET */
                type : 'GET', 
/*Ici search value va prendre la chaine entrée par un utilisateur dans la zone de recherche et sera placée après l’url */                
                data: {
                        'searchValue' : value
                    },
/*Cette fonction permet de vider le contenu du tableau pour recevoir le nouveau contenu*/
                success : function(retour){
                  if(retour){
  			$('#t tbody#search').empty();
  			$.each(JSON.parse(retour), function(i, obj) {
  			$('#t tbody#all').hide();
  			$('#t tbody#search').append('<tr><td> '+obj.id+'  </td><td>    '+obj.type+'  </td><td>'+obj.DatePassage+' </td><td>    '+obj.prix+' </td><td>    '+obj.description+' </td><td>    '+obj.entreprise.nom+' </td>);
});
                  }
                  else
                  {
   $('#t tbody#all').show();
   $('#t tbody#search').empty();
   $('#t tbody#search').fadeIn('fast');
                     }
 },
        });
        return false;
        });
    });
        </script>




{% endblock %}

